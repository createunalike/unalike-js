/*!
* unalike-js v0.17.4
* (c) 2021 Unalike <hello@unalike.net> (https://www.unalike.net/)
* Released under the MIT License.
*/
import t from"axios";import e from"bottleneck";function r(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,u,"next",t)}function u(t){r(s,i,o,a,u,"throw",t)}a(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e,r){return(p=l()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&c(i,r.prototype),i}).apply(null,arguments)}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return p(t,arguments,u(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,t)})(t)}function f(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){var e=l();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),s=new I(n||[]);return o._invoke=function(t,e,r){var n=p;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return j()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=O(s,r);if(a){if(a===y)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var u=l(t,e,r);if("normal"===u.type){if(n=r.done?d:h,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(t,r,s),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p="suspendedStart",h="suspendedYield",f="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};b[o]=function(){return this};var k=Object.getPrototypeOf,T=k&&k(k(x([])));T&&T!==r&&n.call(T,o)&&(b=T);var _=g.prototype=v.prototype=Object.create(b);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(i,o,s,a){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==typeof p&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(p).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,a)}))}a(u.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function O(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=l(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:j}}function j(){return{value:e,done:!0}}return m.prototype=_.constructor=g,g.constructor=m,m.displayName=u(g,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},w(C.prototype),C.prototype[s]=function(){return this},t.AsyncIterator=C,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new C(c(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(_),u(_,a,"Generator"),_[o]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}({exports:{}});var g=function(){function t(e){i(this,t),this.client=e,this.variables={}}return s(t,[{key:"id",value:function(t){return this.variables.id=t,this}}]),t}(),b=function(t){a(u,g);var e,r,o=d(u);function u(t){return i(this,u),o.call(this,t)}return s(u,[{key:"repository",value:function(t){return this.variables.repository=t,this}},{key:"person",value:function(t){return this.variables.person=t,this}},{key:"sortBy",value:function(t){return this.variables.sortBy=t,this}},{key:"sortUp",value:function(){return this.variables.sortDirection="ASC",this}},{key:"sortDown",value:function(){return this.variables.sortDirection="DESC",this}},{key:"pageSize",value:function(t){return this.variables.pageSize=t,this}},{key:"page",value:function(t){return this.variables.page=t,this}},{key:"type",value:function(t){return this.variables.type=t,this}},{key:"status",value:function(t){return this.variables.status=t,this}},{key:"published",value:function(){return this.variables.published=!0,this}},{key:"tags",value:function(t){return this.variables.tags=t,this}},{key:"fetch",value:(r=n(regeneratorRuntime.mark((function t(e){var r,n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.variables.id){t.next=6;break}return r={id:this.variables.id},t.next=4,this.client.query("query content($id: ID!) {\n                content(id: $id) {\n                    ".concat(e,"\n                }\n            }"),r);case 4:return n=t.sent,t.abrupt("return",{data:n.data.content});case 6:return i={repositoryId:this.variables.repository,personId:this.variables.person,sortBy:this.variables.sortBy,sortDirection:this.variables.sortDirection,pageSize:this.variables.pageSize,page:this.variables.page,type:this.variables.type,status:this.variables.status,published:this.variables.published,tags:this.variables.tags},t.next=9,this.client.query("query contents($repositoryId: ID, $personId: ID, $sortBy: String, $sortDirection: SortDirection, $pageSize: Int, $page: Int, $type: [String], $status: [String], $published: Boolean, $tags: [String]){\n            contents(repositoryId: $repositoryId, personId: $personId, sortBy: $sortBy, sortDirection: $sortDirection, pageSize: $pageSize, page: $page, type: $type, status: $status, published: $published, tags: $tags) {\n                ".concat(e,"\n            }\n        }"),i);case 9:return o=t.sent,t.abrupt("return",{data:o.data.contents});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"delete",value:(e=n(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.variables.id){t.next=2;break}throw new Error("Content ID needs to be supplied before you can delete.");case 2:return e={contentId:this.variables.id},t.next=5,this.client.query("mutation deleteContent($contentId: ID!) {\n            deleteContent(contentId: $contentId) {\n                id\n                name\n            }\n        }",e);case 5:return r=t.sent,t.abrupt("return",{data:r.data.deleteContent});case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),u}(),k=function(t){a(o,g);var e,r=d(o);function o(t){return i(this,o),r.call(this,t)}return s(o,[{key:"repository",value:function(t){return this.variables.repository=t,this}},{key:"sortBy",value:function(t){return this.variables.sortBy=t,this}},{key:"sortUp",value:function(){return this.variables.sortDirection="ASC",this}},{key:"sortDown",value:function(){return this.variables.sortDirection="DESC",this}},{key:"fetch",value:(e=n(regeneratorRuntime.mark((function t(e){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.variables.id){t.next=5;break}return t.next=3,this.client.query("query repository($slug: String) {\n                repository(slug: $slug) {\n                    ".concat(e,"\n                }\n            }"),{slug:this.variables.id});case 3:return r=t.sent,t.abrupt("return",{data:r.data.repository});case 5:return n={sortBy:this.variables.sortBy,sortDirection:this.variables.sortDirection},t.next=8,this.client.query("query repositories($sortBy: String, $sortDirection: SortDirection) { \n            repositories(sortBy: $sortBy, sortDirection: $sortDirection) { \n                ".concat(e,"\n            }\n        }"),n);case 8:return i=t.sent,t.abrupt("return",{data:i.data.repositories});case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),o}(),T=function(t){a(u,g);var e,r,o=d(u);function u(t){return i(this,u),o.call(this,t)}return s(u,[{key:"repository",value:function(t){return this.variables.repository=t,this}},{key:"sortBy",value:function(t){return this.variables.sortBy=t,this}},{key:"sortUp",value:function(){return this.variables.sortDirection="ASC",this}},{key:"sortDown",value:function(){return this.variables.sortDirection="DESC",this}},{key:"pageSize",value:function(t){return this.variables.pageSize=t,this}},{key:"page",value:function(t){return this.variables.page=t,this}},{key:"status",value:function(t){return this.variables.status=t,this}},{key:"fetch",value:(r=n(regeneratorRuntime.mark((function t(e){var r,n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.variables.id){t.next=6;break}return r={id:this.variables.id},t.next=4,this.client.query("query model($id: ID!) {\n                model(id: $id) {\n                    ".concat(e,"\n                }\n            }"),r);case 4:return n=t.sent,t.abrupt("return",{data:n.data.model});case 6:return i={repositoryId:this.variables.repository,sortBy:this.variables.sortBy,sortDirection:this.variables.sortDirection,pageSize:this.variables.pageSize,page:this.variables.page,status:this.variables.status},t.next=9,this.client.query("query models($repositoryId: ID!, $sortBy: String, $sortDirection: SortDirection, $pageSize: Int, $page: Int, $type: [String], $status: [String]) {\n            models(repositoryId: $repositoryId, sortBy: $sortBy, sortDirection: $sortDirection, pageSize: $pageSize, page: $page, type: $type, status: $status) {\n                ".concat(e,"\n            }\n        }"),i);case 9:return o=t.sent,t.abrupt("return",{data:o.data.models});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"delete",value:(e=n(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.variables.id){t.next=2;break}throw new Error("Model ID needs to be supplied before you can delete.");case 2:return e={modelId:this.variables.id},t.next=5,this.client.query("mutation deleteModel($modelId: ID!) {\n            deleteModel(modelId: $modelId) {\n                id\n                name\n            }\n        }",e);case 5:return r=t.sent,t.abrupt("return",{data:r.data.deleteModel});case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),u}(),_=function(t){a(r,h(Error));var e=d(r);function r(t){var n;i(this,r);var o="Unknown error";return t.body&&t.body.message?o=t.body.message:t.data&&t.data.message?o=t.data.message:t.data.errors&&t.data.errors.length>0&&t.data.errors[0].message&&(o=t.data.errors[0].message),(n=e.call(this,o)).status=t.status,n}return r}(),w=function(t){a(r,h(Error));var e=d(r);function r(t){var n;return i(this,r),(n=e.call(this,"Query error")).errors=t.data.errors,n.status=t.status,n}return r}(),C=function(){function t(){i(this,t),this.handlers=[]}return s(t,[{key:"use",value:function(t){return this.handlers.push(t),this.handlers.length-1}},{key:"forEach",value:function(t){var e,r=v(this.handlers);try{for(r.s();!(e=r.n()).done;){(0,e.value)(t)}}catch(t){r.e(t)}finally{r.f()}}}]),t}(),O={},S={},L={},I={},x={};Object.defineProperty(x,"__esModule",{value:!0});var j,B,A,D,R,z;x.NewLine="\n",function(t){t.Ordered="ordered",t.Bullet="bullet",t.Checked="checked",t.Unchecked="unchecked"}(j||(j={})),x.ListType=j,function(t){t.Sub="sub",t.Super="super"}(B||(B={})),x.ScriptType=B,function(t){t.Rtl="rtl"}(A||(A={})),x.DirectionType=A,function(t){t.Left="left",t.Center="center",t.Right="right",t.Justify="justify"}(D||(D={})),x.AlignType=D,function(t){t.Image="image",t.Video="video",t.Formula="formula",t.Text="text"}(R||(R={})),x.DataType=R,function(t){t.Block="block",t.InlineGroup="inline-group",t.List="list",t.Video="video",t.Table="table"}(z||(z={})),x.GroupType=z;var E={};Object.defineProperty(E,"__esModule",{value:!0});var $=function(t,e){this.type=t,this.value=e};E.InsertDataQuill=$;var G=function(t,e){this.type=t,this.value=e};E.InsertDataCustom=G;var P={exports:{}};!function(t,e){var r="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object Array]",s="[object Boolean]",a="[object Date]",u="[object Error]",c="[object Function]",l="[object Map]",p="[object Number]",h="[object Object]",f="[object Promise]",d="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",b="[object WeakMap]",k="[object ArrayBuffer]",T="[object DataView]",_=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[i]=C[o]=C[k]=C[s]=C[T]=C[a]=C[u]=C[c]=C[l]=C[p]=C[h]=C[d]=C[y]=C[v]=C[b]=!1;var O="object"==typeof m&&m&&m.Object===Object&&m,S="object"==typeof self&&self&&self.Object===Object&&self,L=O||S||Function("return this")(),I=e&&!e.nodeType&&e,x=I&&t&&!t.nodeType&&t,j=x&&x.exports===I,B=j&&O.process,A=function(){try{return B&&B.binding&&B.binding("util")}catch(t){}}(),D=A&&A.isTypedArray;function R(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function z(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function E(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var $,G,P,q=Array.prototype,V=Function.prototype,H=Object.prototype,M=L["__core-js_shared__"],N=V.toString,U=H.hasOwnProperty,F=($=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",W=H.toString,Q=RegExp("^"+N.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=j?L.Buffer:void 0,Z=L.Symbol,Y=L.Uint8Array,K=H.propertyIsEnumerable,X=q.splice,tt=Z?Z.toStringTag:void 0,et=Object.getOwnPropertySymbols,rt=J?J.isBuffer:void 0,nt=(G=Object.keys,P=Object,function(t){return G(P(t))}),it=At(L,"DataView"),ot=At(L,"Map"),st=At(L,"Promise"),at=At(L,"Set"),ut=At(L,"WeakMap"),ct=At(Object,"create"),lt=Et(it),pt=Et(ot),ht=Et(st),ft=Et(at),dt=Et(ut),yt=Z?Z.prototype:void 0,vt=yt?yt.valueOf:void 0;function mt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function gt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function bt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new bt;++e<r;)this.add(t[e])}function Tt(t){var e=this.__data__=new gt(t);this.size=e.size}function _t(t,e){var r=Pt(t),n=!r&&Gt(t),i=!r&&!n&&qt(t),o=!r&&!n&&!i&&Ut(t),s=r||n||i||o,a=s?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=a.length;for(var c in t)!e&&!U.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||zt(c,u))||a.push(c);return a}function wt(t,e){for(var r=t.length;r--;)if($t(t[r][0],e))return r;return-1}function Ct(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":tt&&tt in Object(t)?function(t){var e=U.call(t,tt),r=t[tt];try{t[tt]=void 0;var n=!0}catch(t){}var i=W.call(t);n&&(e?t[tt]=r:delete t[tt]);return i}(t):function(t){return W.call(t)}(t)}function Ot(t){return Nt(t)&&Ct(t)==i}function St(t,e,r,n,c){return t===e||(null==t||null==e||!Nt(t)&&!Nt(e)?t!=t&&e!=e:function(t,e,r,n,c,f){var m=Pt(t),b=Pt(e),_=m?o:Rt(t),w=b?o:Rt(e),C=(_=_==i?h:_)==h,O=(w=w==i?h:w)==h,S=_==w;if(S&&qt(t)){if(!qt(e))return!1;m=!0,C=!1}if(S&&!C)return f||(f=new Tt),m||Ut(t)?xt(t,e,r,n,c,f):function(t,e,r,n,i,o,c){switch(r){case T:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k:return!(t.byteLength!=e.byteLength||!o(new Y(t),new Y(e)));case s:case a:case p:return $t(+t,+e);case u:return t.name==e.name&&t.message==e.message;case d:case v:return t==e+"";case l:var h=z;case y:var f=1&n;if(h||(h=E),t.size!=e.size&&!f)return!1;var m=c.get(t);if(m)return m==e;n|=2,c.set(t,e);var b=xt(h(t),h(e),n,i,o,c);return c.delete(t),b;case g:if(vt)return vt.call(t)==vt.call(e)}return!1}(t,e,_,r,n,c,f);if(!(1&r)){var L=C&&U.call(t,"__wrapped__"),I=O&&U.call(e,"__wrapped__");if(L||I){var x=L?t.value():t,j=I?e.value():e;return f||(f=new Tt),c(x,j,r,n,f)}}if(!S)return!1;return f||(f=new Tt),function(t,e,r,n,i,o){var s=1&r,a=jt(t),u=a.length,c=jt(e).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var p=a[l];if(!(s?p in e:U.call(e,p)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);var d=s;for(;++l<u;){var y=t[p=a[l]],v=e[p];if(n)var m=s?n(v,y,p,e,t,o):n(y,v,p,t,e,o);if(!(void 0===m?y===v||i(y,v,r,n,o):m)){f=!1;break}d||(d="constructor"==p)}if(f&&!d){var g=t.constructor,b=e.constructor;g==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,r,n,c,f)}(t,e,r,n,St,c))}function Lt(t){return!(!Mt(t)||function(t){return!!F&&F in t}(t))&&(Vt(t)?Q:_).test(Et(t))}function It(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||H,e!==n)return nt(t);var e,r,n,i=[];for(var o in Object(t))U.call(t,o)&&"constructor"!=o&&i.push(o);return i}function xt(t,e,r,n,i,o){var s=1&r,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,p=!0,h=2&r?new kt:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var f=t[l],d=e[l];if(n)var y=s?n(d,f,l,e,t,o):n(f,d,l,t,e,o);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!R(e,(function(t,e){if(s=e,!h.has(s)&&(f===t||i(f,t,r,n,o)))return h.push(e);var s}))){p=!1;break}}else if(f!==d&&!i(f,d,r,n,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function jt(t){return function(t,e,r){var n=e(t);return Pt(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,Ft,Dt)}function Bt(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function At(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Lt(r)?r:void 0}mt.prototype.clear=function(){this.__data__=ct?ct(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(ct){var n=e[t];return n===r?void 0:n}return U.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return ct?void 0!==e[t]:U.call(e,t)},mt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ct&&void 0===e?r:e,this},gt.prototype.clear=function(){this.__data__=[],this.size=0},gt.prototype.delete=function(t){var e=this.__data__,r=wt(e,t);return!(r<0)&&(r==e.length-1?e.pop():X.call(e,r,1),--this.size,!0)},gt.prototype.get=function(t){var e=this.__data__,r=wt(e,t);return r<0?void 0:e[r][1]},gt.prototype.has=function(t){return wt(this.__data__,t)>-1},gt.prototype.set=function(t,e){var r=this.__data__,n=wt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},bt.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(ot||gt),string:new mt}},bt.prototype.delete=function(t){var e=Bt(this,t).delete(t);return this.size-=e?1:0,e},bt.prototype.get=function(t){return Bt(this,t).get(t)},bt.prototype.has=function(t){return Bt(this,t).has(t)},bt.prototype.set=function(t,e){var r=Bt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},kt.prototype.add=kt.prototype.push=function(t){return this.__data__.set(t,r),this},kt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.clear=function(){this.__data__=new gt,this.size=0},Tt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof gt){var n=r.__data__;if(!ot||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new bt(n)}return r.set(t,e),this.size=r.size,this};var Dt=et?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}(et(t),(function(e){return K.call(t,e)})))}:function(){return[]},Rt=Ct;function zt(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||w.test(t))&&t>-1&&t%1==0&&t<e}function Et(t){if(null!=t){try{return N.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $t(t,e){return t===e||t!=t&&e!=e}(it&&Rt(new it(new ArrayBuffer(1)))!=T||ot&&Rt(new ot)!=l||st&&Rt(st.resolve())!=f||at&&Rt(new at)!=y||ut&&Rt(new ut)!=b)&&(Rt=function(t){var e=Ct(t),r=e==h?t.constructor:void 0,n=r?Et(r):"";if(n)switch(n){case lt:return T;case pt:return l;case ht:return f;case ft:return y;case dt:return b}return e});var Gt=Ot(function(){return arguments}())?Ot:function(t){return Nt(t)&&U.call(t,"callee")&&!K.call(t,"callee")},Pt=Array.isArray;var qt=rt||function(){return!1};function Vt(t){if(!Mt(t))return!1;var e=Ct(t);return e==c||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ht(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function Mt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Nt(t){return null!=t&&"object"==typeof t}var Ut=D?function(t){return function(e){return t(e)}}(D):function(t){return Nt(t)&&Ht(t.length)&&!!C[Ct(t)]};function Ft(t){return null!=(e=t)&&Ht(e.length)&&!Vt(e)?_t(t):It(t);var e}t.exports=function(t,e){return St(t,e)}}(P,P.exports);var q=m&&m.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(I,"__esModule",{value:!0});var V=x,H=E,M=q(P.exports),N=function(){function t(t,e){"string"==typeof t&&(t=new H.InsertDataQuill(V.DataType.Text,t+"")),this.insert=t,this.attributes=e||{}}return t.createNewLineOp=function(){return new t(V.NewLine)},t.prototype.isContainerBlock=function(){return this.isBlockquote()||this.isList()||this.isTable()||this.isCodeBlock()||this.isHeader()||this.isBlockAttribute()||this.isCustomTextBlock()},t.prototype.isBlockAttribute=function(){var t=this.attributes;return!!(t.align||t.direction||t.indent)},t.prototype.isBlockquote=function(){return!!this.attributes.blockquote},t.prototype.isHeader=function(){return!!this.attributes.header},t.prototype.isTable=function(){return!!this.attributes.table},t.prototype.isSameHeaderAs=function(t){return t.attributes.header===this.attributes.header&&this.isHeader()},t.prototype.hasSameAdiAs=function(t){return this.attributes.align===t.attributes.align&&this.attributes.direction===t.attributes.direction&&this.attributes.indent===t.attributes.indent},t.prototype.hasSameIndentationAs=function(t){return this.attributes.indent===t.attributes.indent},t.prototype.hasSameAttr=function(t){return M.default(this.attributes,t.attributes)},t.prototype.hasHigherIndentThan=function(t){return(Number(this.attributes.indent)||0)>(Number(t.attributes.indent)||0)},t.prototype.isInline=function(){return!(this.isContainerBlock()||this.isVideo()||this.isCustomEmbedBlock())},t.prototype.isCodeBlock=function(){return!!this.attributes["code-block"]},t.prototype.hasSameLangAs=function(t){return this.attributes["code-block"]===t.attributes["code-block"]},t.prototype.isJustNewline=function(){return this.insert.value===V.NewLine},t.prototype.isList=function(){return this.isOrderedList()||this.isBulletList()||this.isCheckedList()||this.isUncheckedList()},t.prototype.isOrderedList=function(){return this.attributes.list===V.ListType.Ordered},t.prototype.isBulletList=function(){return this.attributes.list===V.ListType.Bullet},t.prototype.isCheckedList=function(){return this.attributes.list===V.ListType.Checked},t.prototype.isUncheckedList=function(){return this.attributes.list===V.ListType.Unchecked},t.prototype.isACheckList=function(){return this.attributes.list==V.ListType.Unchecked||this.attributes.list===V.ListType.Checked},t.prototype.isSameListAs=function(t){return!!t.attributes.list&&(this.attributes.list===t.attributes.list||t.isACheckList()&&this.isACheckList())},t.prototype.isSameTableRowAs=function(t){return!!t.isTable()&&this.isTable()&&this.attributes.table===t.attributes.table},t.prototype.isText=function(){return this.insert.type===V.DataType.Text},t.prototype.isImage=function(){return this.insert.type===V.DataType.Image},t.prototype.isFormula=function(){return this.insert.type===V.DataType.Formula},t.prototype.isVideo=function(){return this.insert.type===V.DataType.Video},t.prototype.isLink=function(){return this.isText()&&!!this.attributes.link},t.prototype.isCustomEmbed=function(){return this.insert instanceof H.InsertDataCustom},t.prototype.isCustomEmbedBlock=function(){return this.isCustomEmbed()&&!!this.attributes.renderAsBlock},t.prototype.isCustomTextBlock=function(){return this.isText()&&!!this.attributes.renderAsBlock},t.prototype.isMentions=function(){return this.isText()&&!!this.attributes.mentions},t}();I.DeltaInsertOp=N;var U={},F={};Object.defineProperty(F,"__esModule",{value:!0});var W=U,Q=function(){function t(){}return t.sanitize=function(e,r){var n={};return e&&"object"==typeof e?(e.class&&t.IsValidClass(e.class)&&(n.class=e.class),e.id&&t.IsValidId(e.id)&&(n.id=e.id),t.IsValidTarget(e.target+"")&&(n.target=e.target),e.avatar&&(n.avatar=W.OpAttributeSanitizer.sanitizeLinkUsingOptions(e.avatar+"",r)),e["end-point"]&&(n["end-point"]=W.OpAttributeSanitizer.sanitizeLinkUsingOptions(e["end-point"]+"",r)),e.slug&&(n.slug=e.slug+""),n):n},t.IsValidClass=function(t){return!!t.match(/^[a-zA-Z0-9_\-]{1,500}$/i)},t.IsValidId=function(t){return!!t.match(/^[a-zA-Z0-9_\-\:\.]{1,500}$/i)},t.IsValidTarget=function(t){return["_self","_blank","_parent","_top"].indexOf(t)>-1},t}();F.MentionSanitizer=Q;var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.sanitize=function(t){var e=t;return e=e.replace(/^\s*/gm,""),/^((https?|s?ftp|file|blob|mailto|tel):|#|\/|data:image\/)/.test(e)?e:"unsafe:"+e};var Z,Y={};function K(t){return X(Z.Html).reduce(et,t)}function X(t){var e=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#x27;"],["\\/","&#x2F;"],["\\(","&#40;"],["\\)","&#41;"]];return t===Z.Html?e.filter((function(t){var e=t[0];return t[1],-1===e.indexOf("(")&&-1===e.indexOf(")")})):e.filter((function(t){var e=t[0];return t[1],-1===e.indexOf("/")}))}function tt(t,e){return t.replace(new RegExp(e[0],"g"),e[1])}function et(t,e){return t.replace(new RegExp(e[1],"g"),e[0].replace("\\",""))}Object.defineProperty(Y,"__esModule",{value:!0}),function(t){t[t.Html=0]="Html",t[t.Url=1]="Url"}(Z||(Z={})),Y.makeStartTag=function(t,e){if(void 0===e&&(e=void 0),!t)return"";var r="";e&&(r=[].concat(e).map((function(t){return t.key+(t.value?'="'+t.value+'"':"")})).join(" "));var n=">";return"img"!==t&&"br"!==t||(n="/>"),r?"<"+t+" "+r+n:"<"+t+n},Y.makeEndTag=function(t){return void 0===t&&(t=""),t&&"</"+t+">"||""},Y.decodeHtml=K,Y.encodeHtml=function(t,e){return void 0===e&&(e=!0),e&&(t=K(t)),X(Z.Html).reduce(tt,t)},Y.encodeLink=function(t){var e=X(Z.Url),r=e.reduce(et,t);return e.reduce(tt,r)};var rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.preferSecond=function(t){return 0===t.length?null:t.length>=2?t[1]:t[0]},rt.flatten=function t(e){return e.reduce((function(e,r){return e.concat(Array.isArray(r)?t(r):r)}),[])},rt.find=function(t,e){if(Array.prototype.find)return Array.prototype.find.call(t,e);for(var r=0;r<t.length;r++)if(e(t[r]))return t[r]},rt.groupConsecutiveElementsWhile=function(t,e){for(var r,n=[],i=0;i<t.length;i++)r=t[i],i>0&&e(r,t[i-1])?n[n.length-1].push(r):n.push([r]);return n.map((function(t){return 1===t.length?t[0]:t}))},rt.sliceFromReverseWhile=function(t,e,r){for(var n={elements:[],sliceStartsAt:-1},i=e;i>=0&&r(t[i]);i--)n.sliceStartsAt=i,n.elements.unshift(t[i]);return n},rt.intersperse=function(t,e){return t.reduce((function(r,n,i){return r.push(n),i<t.length-1&&r.push(e),r}),[])};var nt=m&&m.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(U,"__esModule",{value:!0});var it=x,ot=F,st=nt(J),at=Y,ut=rt,ct=function(){function t(){}return t.sanitize=function(e,r){var n={};if(!e||"object"!=typeof e)return n;var i=["bold","italic","underline","strike","code","blockquote","code-block","renderAsBlock"],o=["background","color"],s=e.font,a=e.size,u=e.link,c=e.script,l=e.list,p=e.header,h=e.align,f=e.direction,d=e.indent,y=e.mentions,v=e.mention,m=e.width,g=e.target,b=e.rel,k=e["code-block"],T=i.concat(o,["font","size","link","script","list","header","align","direction","indent","mentions","mention","width","target","rel","code-block"]);if(i.forEach((function(t){var r=e[t];r&&(n[t]=!!r)})),o.forEach((function(r){var i=e[r];i&&(t.IsValidHexColor(i+"")||t.IsValidColorLiteral(i+"")||t.IsValidRGBColor(i+""))&&(n[r]=i)})),s&&t.IsValidFontName(s+"")&&(n.font=s),a&&t.IsValidSize(a+"")&&(n.size=a),m&&t.IsValidWidth(m+"")&&(n.width=m),u&&(n.link=t.sanitizeLinkUsingOptions(u+"",r)),g&&t.isValidTarget(g)&&(n.target=g),b&&t.IsValidRel(b)&&(n.rel=b),k&&(t.IsValidLang(k)?n["code-block"]=k:n["code-block"]=!!k),c!==it.ScriptType.Sub&&it.ScriptType.Super!==c||(n.script=c),l!==it.ListType.Bullet&&l!==it.ListType.Ordered&&l!==it.ListType.Checked&&l!==it.ListType.Unchecked||(n.list=l),Number(p)&&(n.header=Math.min(Number(p),6)),ut.find([it.AlignType.Center,it.AlignType.Right,it.AlignType.Justify,it.AlignType.Left],(function(t){return t===h}))&&(n.align=h),f===it.DirectionType.Rtl&&(n.direction=f),d&&Number(d)&&(n.indent=Math.min(Number(d),30)),y&&v){var _=ot.MentionSanitizer.sanitize(v,r);Object.keys(_).length>0&&(n.mentions=!!y,n.mention=v)}return Object.keys(e).reduce((function(t,r){return-1===T.indexOf(r)&&(t[r]=e[r]),t}),n)},t.sanitizeLinkUsingOptions=function(t,e){var r=function(){};e&&"function"==typeof e.urlSanitizer&&(r=e.urlSanitizer);var n=r(t);return"string"==typeof n?n:at.encodeLink(st.sanitize(t))},t.IsValidHexColor=function(t){return!!t.match(/^#([0-9A-F]{6}|[0-9A-F]{3})$/i)},t.IsValidColorLiteral=function(t){return!!t.match(/^[a-z]{1,50}$/i)},t.IsValidRGBColor=function(t){return!!t.match(/^rgb\(((0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d),\s*){2}(0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d)\)$/i)},t.IsValidFontName=function(t){return!!t.match(/^[a-z\s0-9\- ]{1,30}$/i)},t.IsValidSize=function(t){return!!t.match(/^[a-z0-9\-]{1,20}$/i)},t.IsValidWidth=function(t){return!!t.match(/^[0-9]*(px|em|%)?$/)},t.isValidTarget=function(t){return!!t.match(/^[_a-zA-Z0-9\-]{1,50}$/)},t.IsValidRel=function(t){return!!t.match(/^[a-zA-Z\s\-]{1,250}$/i)},t.IsValidLang=function(t){return"boolean"==typeof t||!!t.match(/^[a-zA-Z\s\-\\\/\+]{1,50}$/i)},t}();U.OpAttributeSanitizer=ct;var lt={},pt={};Object.defineProperty(pt,"__esModule",{value:!0}),pt.tokenizeWithNewLines=function(t){var e="\n";if(t===e)return[t];var r=t.split(e);if(1===r.length)return r;var n=r.length-1;return r.reduce((function(t,r,i){return i!==n?""!==r?t=t.concat(r,e):t.push(e):""!==r&&t.push(r),t}),[])};var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.assign=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=0;i<e.length;i++){var o=e[i];if(null!=o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])}return n};var ft=m&&m.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(lt,"__esModule",{value:!0});var dt=x,yt=ft(pt),vt=ft(ht),mt=function(){function t(){}return t.denormalize=function(t){if(!t||"object"!=typeof t)return[];if("object"==typeof t.insert||t.insert===dt.NewLine)return[t];var e=yt.tokenizeWithNewLines(t.insert+"");if(1===e.length)return[t];var r=vt.assign({},t,{insert:dt.NewLine});return e.map((function(e){return e===dt.NewLine?r:vt.assign({},t,{insert:e})}))},t}();lt.InsertOpDenormalizer=mt,Object.defineProperty(L,"__esModule",{value:!0});var gt=I,bt=x,kt=E,Tt=U,_t=lt,wt=function(){function t(){}return t.convert=function(e,r){if(!Array.isArray(e))return[];for(var n,i,o=[],s=0,a=[].concat.apply([],e.map(_t.InsertOpDenormalizer.denormalize));s<a.length;s++){var u=a[s];u.insert&&((n=t.convertInsertVal(u.insert,r))&&(i=Tt.OpAttributeSanitizer.sanitize(u.attributes,r),o.push(new gt.DeltaInsertOp(n,i))))}return o},t.convertInsertVal=function(t,e){if("string"==typeof t)return new kt.InsertDataQuill(bt.DataType.Text,t);if(!t||"object"!=typeof t)return null;var r=Object.keys(t);return r.length?bt.DataType.Image in t?new kt.InsertDataQuill(bt.DataType.Image,Tt.OpAttributeSanitizer.sanitizeLinkUsingOptions(t[bt.DataType.Image]+"",e)):bt.DataType.Video in t?new kt.InsertDataQuill(bt.DataType.Video,Tt.OpAttributeSanitizer.sanitizeLinkUsingOptions(t[bt.DataType.Video]+"",e)):bt.DataType.Formula in t?new kt.InsertDataQuill(bt.DataType.Formula,t[bt.DataType.Formula]):new kt.InsertDataCustom(r[0],t[r[0]]):null},t}();L.InsertOpsConverter=wt;var Ct={};!function(t){var e=m&&m.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(t,"__esModule",{value:!0});var r=Y,n=x,i=e(ht),o=e(rt),s=U,a={serif:"font-family: Georgia, Times New Roman, serif",monospace:"font-family: Monaco, Courier New, monospace"};t.DEFAULT_INLINE_STYLES={font:function(t){return a[t]||"font-family:"+t},size:{small:"font-size: 0.75em",large:"font-size: 1.5em",huge:"font-size: 2.5em"},indent:function(t,e){var r=3*parseInt(t,10);return"padding-"+("rtl"===e.attributes.direction?"right":"left")+":"+r+"em"},direction:function(t,e){return"rtl"===t?"direction:rtl"+(e.attributes.align?"":"; text-align:inherit"):void 0}};var u=function(){function e(t,e){this.op=t,this.options=i.assign({},{classPrefix:"ql",inlineStyles:void 0,encodeHtml:!0,listItemTag:"li",paragraphTag:"p"},e)}return e.prototype.prefixClass=function(t){return this.options.classPrefix?this.options.classPrefix+"-"+t:t+""},e.prototype.getHtml=function(){var t=this.getHtmlParts();return t.openingTag+t.content+t.closingTag},e.prototype.getHtmlParts=function(){var t=this;if(this.op.isJustNewline()&&!this.op.isContainerBlock())return{openingTag:"",closingTag:"",content:n.NewLine};var e=this.getTags(),i=this.getTagAttributes();!e.length&&i.length&&e.push("span");for(var o=[],s=[],a=function(e){return"img"===e&&!!t.op.attributes.link},u=0,c=e;u<c.length;u++){var l=c[u];a(l)&&o.push(r.makeStartTag("a",this.getLinkAttrs())),o.push(r.makeStartTag(l,i)),s.push("img"===l?"":r.makeEndTag(l)),a(l)&&s.push(r.makeEndTag("a")),i=[]}return s.reverse(),{openingTag:o.join(""),content:this.getContent(),closingTag:s.join("")}},e.prototype.getContent=function(){if(this.op.isContainerBlock())return"";if(this.op.isMentions())return this.op.insert.value;var t=this.op.isFormula()||this.op.isText()?this.op.insert.value:"";return this.options.encodeHtml&&r.encodeHtml(t)||t},e.prototype.getCssClasses=function(){var t=this.op.attributes;if(this.options.inlineStyles)return[];var e=["indent","align","direction","font","size"];return this.options.allowBackgroundClasses&&e.push("background"),(this.getCustomCssClasses()||[]).concat(e.filter((function(e){return!!t[e]})).filter((function(e){return"background"!==e||s.OpAttributeSanitizer.IsValidColorLiteral(t[e])})).map((function(e){return e+"-"+t[e]})).concat(this.op.isFormula()?"formula":[]).concat(this.op.isVideo()?"video":[]).concat(this.op.isImage()?"image":[]).map(this.prefixClass.bind(this)))},e.prototype.getCssStyles=function(){var e=this,r=this.op.attributes,n=[["color"]];return!this.options.inlineStyles&&this.options.allowBackgroundClasses||n.push(["background","background-color"]),this.options.inlineStyles&&(n=n.concat([["indent"],["align","text-align"],["direction"],["font","font-family"],["size"]])),(this.getCustomCssStyles()||[]).concat(n.filter((function(t){return!!r[t[0]]})).map((function(n){var i=n[0],s=r[i],a=e.options.inlineStyles&&e.options.inlineStyles[i]||t.DEFAULT_INLINE_STYLES[i];return"object"==typeof a?a[s]:"function"==typeof a?a(s,e.op):o.preferSecond(n)+":"+s}))).filter((function(t){return void 0!==t}))},e.prototype.getTagAttributes=function(){if(this.op.attributes.code&&!this.op.isLink())return[];var t=this.makeAttr.bind(this),e=this.getCustomTagAttributes(),r=e?Object.keys(this.getCustomTagAttributes()).map((function(r){return t(r,e[r])})):[],n=this.getCssClasses(),i=n.length?r.concat([t("class",n.join(" "))]):r;if(this.op.isImage())return this.op.attributes.width&&(i=i.concat(t("width",this.op.attributes.width))),i.concat(t("src",this.op.insert.value));if(this.op.isACheckList())return i.concat(t("data-checked",this.op.isCheckedList()?"true":"false"));if(this.op.isFormula())return i;if(this.op.isVideo())return i.concat(t("frameborder","0"),t("allowfullscreen","true"),t("src",this.op.insert.value));if(this.op.isMentions()){var o=this.op.attributes.mention;return o.class&&(i=i.concat(t("class",o.class))),i=o["end-point"]&&o.slug?i.concat(t("href",o["end-point"]+"/"+o.slug)):i.concat(t("href","about:blank")),o.target&&(i=i.concat(t("target",o.target))),i}var s=this.getCssStyles();return s.length&&i.push(t("style",s.join(";"))),this.op.isCodeBlock()&&"string"==typeof this.op.attributes["code-block"]?i.concat(t("data-language",this.op.attributes["code-block"])):(this.op.isContainerBlock()||this.op.isLink()&&(i=i.concat(this.getLinkAttrs())),i)},e.prototype.makeAttr=function(t,e){return{key:t,value:e}},e.prototype.getLinkAttrs=function(){var t=s.OpAttributeSanitizer.isValidTarget(this.options.linkTarget||"")?this.options.linkTarget:void 0,e=s.OpAttributeSanitizer.IsValidRel(this.options.linkRel||"")?this.options.linkRel:void 0,r=this.op.attributes.target||t,n=this.op.attributes.rel||e;return[].concat(this.makeAttr("href",this.op.attributes.link)).concat(r?this.makeAttr("target",r):[]).concat(n?this.makeAttr("rel",n):[])},e.prototype.getCustomTag=function(t){if(this.options.customTag&&"function"==typeof this.options.customTag)return this.options.customTag.apply(null,[t,this.op])},e.prototype.getCustomTagAttributes=function(){if(this.options.customTagAttributes&&"function"==typeof this.options.customTagAttributes)return this.options.customTagAttributes.apply(null,[this.op])},e.prototype.getCustomCssClasses=function(){if(this.options.customCssClasses&&"function"==typeof this.options.customCssClasses){var t=this.options.customCssClasses.apply(null,[this.op]);if(t)return Array.isArray(t)?t:[t]}},e.prototype.getCustomCssStyles=function(){if(this.options.customCssStyles&&"function"==typeof this.options.customCssStyles){var t=this.options.customCssStyles.apply(null,[this.op]);if(t)return Array.isArray(t)?t:[t]}},e.prototype.getTags=function(){var t=this,e=this.op.attributes;if(!this.op.isText())return[this.op.isVideo()?"iframe":this.op.isImage()?"img":"span"];for(var r=this.options.paragraphTag||"p",i=0,s=[["blockquote"],["code-block","pre"],["list",this.options.listItemTag],["header"],["align",r],["direction",r],["indent",r]];i<s.length;i++){var a,u=s[i],c=u[0];if(e[c])return(a=this.getCustomTag(c))?[a]:"header"===c?["h"+e[c]]:[o.preferSecond(u)]}if(this.op.isCustomTextBlock())return(a=this.getCustomTag("renderAsBlock"))?[a]:[r];var l=Object.keys(e).reduce((function(e,r){var n=t.getCustomTag(r);return n&&(e[r]=n),e}),{}),p=[["link","a"],["mentions","a"],["script"],["bold","strong"],["italic","em"],["strike","s"],["underline","u"],["code"]];return p.filter((function(t){return!!e[t[0]]})).concat(Object.keys(l).filter((function(t){return!p.some((function(e){return e[0]==t}))})).map((function(t){return[t,l[t]]}))).map((function(t){return l[t[0]]?l[t[0]]:"script"===t[0]?e[t[0]]===n.ScriptType.Sub?"sub":"sup":o.preferSecond(t)}))},e}();t.OpToHtmlConverter=u}(Ct);var Ot,St={},Lt={},It=m&&m.__extends||(Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}Ot(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(Lt,"__esModule",{value:!0});var xt=function(t){this.ops=t};Lt.InlineGroup=xt;var jt=function(t){this.op=t},Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e}(jt);Lt.VideoItem=Bt;var At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e}(jt);Lt.BlotBlock=At;var Dt=function(t,e){this.op=t,this.ops=e};Lt.BlockGroup=Dt;var Rt=function(t){this.items=t};Lt.ListGroup=Rt;var zt=function(t,e){void 0===e&&(e=null),this.item=t,this.innerList=e};Lt.ListItem=zt;var Et=function(t){this.rows=t};Lt.TableGroup=Et;var $t=function(t){this.cells=t};Lt.TableRow=$t;var Gt=function(t){this.item=t};Lt.TableCell=Gt,Object.defineProperty(St,"__esModule",{value:!0});var Pt=I,qt=rt,Vt=Lt,Ht=function(){function t(){}return t.pairOpsWithTheirBlock=function(t){for(var e,r=[],n=function(t){return!(t.isJustNewline()||t.isCustomEmbedBlock()||t.isVideo()||t.isContainerBlock())},i=function(t){return t.isInline()},o=t.length-1;o>=0;o--){var s=t[o];s.isVideo()?r.push(new Vt.VideoItem(s)):s.isCustomEmbedBlock()?r.push(new Vt.BlotBlock(s)):s.isContainerBlock()?(e=qt.sliceFromReverseWhile(t,o-1,n),r.push(new Vt.BlockGroup(s,e.elements)),o=e.sliceStartsAt>-1?e.sliceStartsAt:o):(e=qt.sliceFromReverseWhile(t,o-1,i),r.push(new Vt.InlineGroup(e.elements.concat(s))),o=e.sliceStartsAt>-1?e.sliceStartsAt:o)}return r.reverse(),r},t.groupConsecutiveSameStyleBlocks=function(e,r){return void 0===r&&(r={header:!0,codeBlocks:!0,blockquotes:!0,customBlocks:!0}),qt.groupConsecutiveElementsWhile(e,(function(e,n){return e instanceof Vt.BlockGroup&&n instanceof Vt.BlockGroup&&(r.codeBlocks&&t.areBothCodeblocksWithSameLang(e,n)||r.blockquotes&&t.areBothBlockquotesWithSameAdi(e,n)||r.header&&t.areBothSameHeadersWithSameAdi(e,n)||r.customBlocks&&t.areBothCustomBlockWithSameAttr(e,n))}))},t.reduceConsecutiveSameStyleBlocksToOne=function(t){var e=Pt.DeltaInsertOp.createNewLineOp();return t.map((function(t){if(!Array.isArray(t))return t instanceof Vt.BlockGroup&&!t.ops.length&&t.ops.push(e),t;var r=t.length-1;return t[0].ops=qt.flatten(t.map((function(t,n){return t.ops.length?t.ops.concat(n<r?[e]:[]):[e]}))),t[0]}))},t.areBothCodeblocksWithSameLang=function(t,e){return t.op.isCodeBlock()&&e.op.isCodeBlock()&&t.op.hasSameLangAs(e.op)},t.areBothSameHeadersWithSameAdi=function(t,e){return t.op.isSameHeaderAs(e.op)&&t.op.hasSameAdiAs(e.op)},t.areBothBlockquotesWithSameAdi=function(t,e){return t.op.isBlockquote()&&e.op.isBlockquote()&&t.op.hasSameAdiAs(e.op)},t.areBothCustomBlockWithSameAttr=function(t,e){return t.op.isCustomTextBlock()&&e.op.isCustomTextBlock()&&t.op.hasSameAttr(e.op)},t}();St.Grouper=Ht;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});var Nt=Lt,Ut=rt,Ft=function(){function t(){}return t.prototype.nest=function(t){var e=this,r=this.convertListBlocksToListGroups(t),n=this.groupConsecutiveListGroups(r),i=Ut.flatten(n.map((function(t){return Array.isArray(t)?e.nestListSection(t):t})));return Ut.groupConsecutiveElementsWhile(i,(function(t,e){return t instanceof Nt.ListGroup&&e instanceof Nt.ListGroup&&t.items[0].item.op.isSameListAs(e.items[0].item.op)})).map((function(t){if(!Array.isArray(t))return t;var e=t.map((function(t){return t.items}));return new Nt.ListGroup(Ut.flatten(e))}))},t.prototype.convertListBlocksToListGroups=function(t){return Ut.groupConsecutiveElementsWhile(t,(function(t,e){return t instanceof Nt.BlockGroup&&e instanceof Nt.BlockGroup&&t.op.isList()&&e.op.isList()&&t.op.isSameListAs(e.op)&&t.op.hasSameIndentationAs(e.op)})).map((function(t){return Array.isArray(t)?new Nt.ListGroup(t.map((function(t){return new Nt.ListItem(t)}))):t instanceof Nt.BlockGroup&&t.op.isList()?new Nt.ListGroup([new Nt.ListItem(t)]):t}))},t.prototype.groupConsecutiveListGroups=function(t){return Ut.groupConsecutiveElementsWhile(t,(function(t,e){return t instanceof Nt.ListGroup&&e instanceof Nt.ListGroup}))},t.prototype.nestListSection=function(t){var e=this,r=this.groupByIndent(t);return Object.keys(r).map(Number).sort().reverse().forEach((function(n){r[n].forEach((function(r){var n=t.indexOf(r);e.placeUnderParent(r,t.slice(0,n))&&t.splice(n,1)}))})),t},t.prototype.groupByIndent=function(t){return t.reduce((function(t,e){var r=e.items[0].item.op.attributes.indent;return r&&(t[r]=t[r]||[],t[r].push(e)),t}),{})},t.prototype.placeUnderParent=function(t,e){for(var r=e.length-1;r>=0;r--){var n=e[r];if(t.items[0].item.op.hasHigherIndentThan(n.items[0].item.op)){var i=n.items[n.items.length-1];return i.innerList?i.innerList.items=i.innerList.items.concat(t.items):i.innerList=t,!0}}return!1},t}();Mt.ListNester=Ft;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});var Qt=Lt,Jt=rt,Zt=function(){function t(){}return t.prototype.group=function(t){return this.convertTableBlocksToTableGroups(t)},t.prototype.convertTableBlocksToTableGroups=function(t){var e=this;return Jt.groupConsecutiveElementsWhile(t,(function(t,e){return t instanceof Qt.BlockGroup&&e instanceof Qt.BlockGroup&&t.op.isTable()&&e.op.isTable()})).map((function(t){return Array.isArray(t)?new Qt.TableGroup(e.convertTableBlocksToTableRows(t)):t instanceof Qt.BlockGroup&&t.op.isTable()?new Qt.TableGroup([new Qt.TableRow([new Qt.TableCell(t)])]):t}))},t.prototype.convertTableBlocksToTableRows=function(t){return Jt.groupConsecutiveElementsWhile(t,(function(t,e){return t instanceof Qt.BlockGroup&&e instanceof Qt.BlockGroup&&t.op.isTable()&&e.op.isTable()&&t.op.isSameTableRowAs(e.op)})).map((function(t){return new Qt.TableRow(Array.isArray(t)?t.map((function(t){return new Qt.TableCell(t)})):[new Qt.TableCell(t)])}))},t}();Wt.TableGrouper=Zt;var Yt=m&&m.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(S,"__esModule",{value:!0});var Kt=L,Xt=Ct,te=St,ee=Lt,re=Mt,ne=Y,ie=Yt(ht),oe=x,se=Wt,ae=function(){function t(t,e){var r;this.rawDeltaOps=[],this.callbacks={},this.options=ie.assign({paragraphTag:"p",encodeHtml:!0,classPrefix:"ql",inlineStyles:!1,multiLineBlockquote:!0,multiLineHeader:!0,multiLineCodeblock:!0,multiLineParagraph:!0,multiLineCustomBlock:!0,allowBackgroundClasses:!1,linkTarget:"_blank"},e,{orderedListTag:"ol",bulletListTag:"ul",listItemTag:"li"}),r=this.options.inlineStyles?"object"==typeof this.options.inlineStyles?this.options.inlineStyles:{}:void 0,this.converterOptions={encodeHtml:this.options.encodeHtml,classPrefix:this.options.classPrefix,inlineStyles:r,listItemTag:this.options.listItemTag,paragraphTag:this.options.paragraphTag,linkRel:this.options.linkRel,linkTarget:this.options.linkTarget,allowBackgroundClasses:this.options.allowBackgroundClasses,customTag:this.options.customTag,customTagAttributes:this.options.customTagAttributes,customCssClasses:this.options.customCssClasses,customCssStyles:this.options.customCssStyles},this.rawDeltaOps=t}return t.prototype._getListTag=function(t){return t.isOrderedList()?this.options.orderedListTag+"":t.isBulletList()||t.isCheckedList()||t.isUncheckedList()?this.options.bulletListTag+"":""},t.prototype.getGroupedOps=function(){var t=Kt.InsertOpsConverter.convert(this.rawDeltaOps,this.options),e=te.Grouper.pairOpsWithTheirBlock(t),r=te.Grouper.groupConsecutiveSameStyleBlocks(e,{blockquotes:!!this.options.multiLineBlockquote,header:!!this.options.multiLineHeader,codeBlocks:!!this.options.multiLineCodeblock,customBlocks:!!this.options.multiLineCustomBlock}),n=te.Grouper.reduceConsecutiveSameStyleBlocksToOne(r);return n=(new se.TableGrouper).group(n),(new re.ListNester).nest(n)},t.prototype.convert=function(){var t=this;return this.getGroupedOps().map((function(e){if(e instanceof ee.ListGroup)return t._renderWithCallbacks(oe.GroupType.List,e,(function(){return t._renderList(e)}));if(e instanceof ee.TableGroup)return t._renderWithCallbacks(oe.GroupType.Table,e,(function(){return t._renderTable(e)}));if(e instanceof ee.BlockGroup){var r=e;return t._renderWithCallbacks(oe.GroupType.Block,e,(function(){return t._renderBlock(r.op,r.ops)}))}return e instanceof ee.BlotBlock?t._renderCustom(e.op,null):e instanceof ee.VideoItem?t._renderWithCallbacks(oe.GroupType.Video,e,(function(){var r=e;return new Xt.OpToHtmlConverter(r.op,t.converterOptions).getHtml()})):t._renderWithCallbacks(oe.GroupType.InlineGroup,e,(function(){return t._renderInlines(e.ops,!0)}))})).join("")},t.prototype._renderWithCallbacks=function(t,e,r){var n="",i=this.callbacks.beforeRender_cb;(n="function"==typeof i?i.apply(null,[t,e]):"")||(n=r());var o=this.callbacks.afterRender_cb;return n="function"==typeof o?o.apply(null,[t,n]):n},t.prototype._renderList=function(t){var e=this,r=t.items[0];return ne.makeStartTag(this._getListTag(r.item.op))+t.items.map((function(t){return e._renderListItem(t)})).join("")+ne.makeEndTag(this._getListTag(r.item.op))},t.prototype._renderListItem=function(t){t.item.op.attributes.indent=0;var e=new Xt.OpToHtmlConverter(t.item.op,this.converterOptions).getHtmlParts(),r=this._renderInlines(t.item.ops,!1);return e.openingTag+r+(t.innerList?this._renderList(t.innerList):"")+e.closingTag},t.prototype._renderTable=function(t){var e=this;return ne.makeStartTag("table")+ne.makeStartTag("tbody")+t.rows.map((function(t){return e._renderTableRow(t)})).join("")+ne.makeEndTag("tbody")+ne.makeEndTag("table")},t.prototype._renderTableRow=function(t){var e=this;return ne.makeStartTag("tr")+t.cells.map((function(t){return e._renderTableCell(t)})).join("")+ne.makeEndTag("tr")},t.prototype._renderTableCell=function(t){var e=new Xt.OpToHtmlConverter(t.item.op,this.converterOptions).getHtmlParts(),r=this._renderInlines(t.item.ops,!1);return ne.makeStartTag("td",{key:"data-row",value:t.item.op.attributes.table})+e.openingTag+r+e.closingTag+ne.makeEndTag("td")},t.prototype._renderBlock=function(t,e){var r=this,n=new Xt.OpToHtmlConverter(t,this.converterOptions).getHtmlParts();if(t.isCodeBlock())return n.openingTag+ne.encodeHtml(e.map((function(e){return e.isCustomEmbed()?r._renderCustom(e,t):e.insert.value})).join(""))+n.closingTag;var i=e.map((function(e){return r._renderInline(e,t)})).join("");return n.openingTag+(i||"<br/>")+n.closingTag},t.prototype._renderInlines=function(t,e){var r=this;void 0===e&&(e=!0);var n=t.length-1,i=t.map((function(t,e){return e>0&&e===n&&t.isJustNewline()?"":r._renderInline(t,null)})).join("");if(!e)return i;var o=ne.makeStartTag(this.options.paragraphTag),s=ne.makeEndTag(this.options.paragraphTag);return"<br/>"===i||this.options.multiLineParagraph?o+i+s:o+i.split("<br/>").map((function(t){return""===t?"<br/>":t})).join(s+o)+s},t.prototype._renderInline=function(t,e){return t.isCustomEmbed()?this._renderCustom(t,e):new Xt.OpToHtmlConverter(t,this.converterOptions).getHtml().replace(/\n/g,"<br/>")},t.prototype._renderCustom=function(t,e){var r=this.callbacks.renderCustomOp_cb;return"function"==typeof r?r.apply(null,[t,e]):""},t.prototype.beforeRender=function(t){"function"==typeof t&&(this.callbacks.beforeRender_cb=t)},t.prototype.afterRender=function(t){"function"==typeof t&&(this.callbacks.afterRender_cb=t)},t.prototype.renderCustomWith=function(t){this.callbacks.renderCustomOp_cb=t},t}();S.QuillDeltaToHtmlConverter=ae,Object.defineProperty(O,"__esModule",{value:!0});var ue=S,ce=O.QuillDeltaToHtmlConverter=ue.QuillDeltaToHtmlConverter,le=Ct;O.OpToHtmlConverter=le.OpToHtmlConverter;var pe=Lt;O.InlineGroup=pe.InlineGroup,O.VideoItem=pe.VideoItem,O.BlockGroup=pe.BlockGroup,O.ListGroup=pe.ListGroup,O.ListItem=pe.ListItem,O.BlotBlock=pe.BlotBlock;var he=I;O.DeltaInsertOp=he.DeltaInsertOp;var fe=E;O.InsertDataQuill=fe.InsertDataQuill,O.InsertDataCustom=fe.InsertDataCustom;var de=x;O.NewLine=de.NewLine,O.ListType=de.ListType,O.ScriptType=de.ScriptType,O.DirectionType=de.DirectionType,O.AlignType=de.AlignType,O.DataType=de.DataType,O.GroupType=de.GroupType;var ye=function(){function t(){i(this,t)}return s(t,null,[{key:"convertDeltaToHtml",value:function(t,e){if(!t.ops)throw new Error("Incorrect delta format. Cannot find ops array.");var r=new ce(t.ops,{multiLineParagraph:!1,multiLineCodeblock:!1,multiLineHeader:!1,multiLineBlockquote:!1,classPrefix:"u",urlSanitizer:function(t){return 0==t.indexOf("www.")?"https://".concat(t):t}});return r.renderCustomWith(e),r.convert()}}]),t}(),ve=function(){function e(){i(this,e),this.files={},this.events={}}var r,o,a,u,c;return s(e,[{key:"setClient",value:function(t){this.client=t}},{key:"hasUploads",value:function(){return Object.keys(this.files).length>0}},{key:"addFile",value:function(t,e,r,n,i,o,s){for(var a=Buffer.byteLength(r),u=new me(this,t,e,r,a,i,n,o,s),c=Math.max(Math.ceil(a/1048576),1),l=0;l<c;l++){var p=1048576*l,h=Math.min(a,1048576*(l+1)),f=h-p,d="".concat(l,"_").concat(c);u.addChunk(d,{offset:l,maxOffset:c,startByte:p,endByte:h,size:f})}this.files[t]=u}},{key:"upload",value:(c=n(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=this.files[e]).isComplete){t.next=4;break}return t.next=4,r.upload();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"uploadAll",value:function(){for(var t=0,e=Object.keys(this.files);t<e.length;t++){var r=e[t];this.upload(r)}}},{key:"complete",value:function(){for(var t=0,e=Object.values(this.files);t<e.length;t++){if(!e[t].isComplete)return}this.emit("complete")}},{key:"resume",value:(u=n(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=this.files[e]).isComplete){t.next=4;break}return t.next=4,r.resume();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"resumeAll",value:function(){for(var t=0,e=Object.keys(this.files);t<e.length;t++){var r=e[t];this.resume(r)}this.emit("resumed")}},{key:"pause",value:(a=n(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=this.files[e]).isComplete){t.next=4;break}return t.next=4,r.pause();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"pauseAll",value:function(){for(var t=0,e=Object.keys(this.files);t<e.length;t++){var r=e[t];this.pause(r)}this.emit("paused")}},{key:"cancel",value:(o=n(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=this.files[e]).isComplete){t.next=4;break}return t.next=4,r.cancel();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"cancelAll",value:function(){for(var t=0,e=Object.keys(this.files);t<e.length;t++){var r=e[t];this.cancel(r)}this.emit("cancelled")}},{key:"remove",value:function(t){this.cancel(t),delete this.files[t]}},{key:"reset",value:function(){for(var t=0,e=Object.keys(this.files);t<e.length;t++){var r=e[t];this.remove(r)}this.emit("cancelled"),this.emit("reset")}},{key:"on",value:function(t,e){t in this.events||(this.events[t]=[]),this.events[t].push(e)}},{key:"emit",value:function(t,e){if(t in this.events){var r,n=v(this.events[t]);try{for(n.s();!(r=n.n()).done;){(0,r.value)(e)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"put",value:(r=n(regeneratorRuntime.mark((function e(r,n,i,o,s){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put(r,n,{cancelToken:o,headers:{"Content-Type":i},onUploadProgress:s});case 2:case"end":return e.stop()}}),e)}))),function(t,e,n,i,o){return r.apply(this,arguments)})}]),e}(),me=function(){function r(t,e,n,o,s,a,u,c,l){i(this,r),this.uploader=t,this.ref=e,this.name=n,this.buffer=o,this.size=s,this.repositoryId=a,this.parentContentId=l,this.contentType=u,this.actions=c,this.chunks={},this.target=null,this.isComplete=!1}var o,a,u,c,l,p,h;return s(r,[{key:"upload",value:(h=n(regeneratorRuntime.mark((function t(){var e,r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.ref,t.prev=1,t.next=4,this.uploader.client.query("query upload($repositoryId: ID!, $contentType: String!, $chunks: JSON) { \n                    upload(repositoryId: $repositoryId, contentType: $contentType, chunks: $chunks) {\n                            url\n                            key\n                            chunks\n                        }\n                    }",{repositoryId:this.repositoryId,contentType:this.contentType,chunks:this.chunks});case 4:r=t.sent,n=r.data.upload,this.target=n,t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",this.uploader.emit("error",{ref:e,error:t.t0}));case 12:for(i in this.chunks)this.chunks[i].isComplete||(this.chunks[i]=Object.assign(this.chunks[i],this.target.chunks[i]));return t.next=15,this.uploadChunks();case 15:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return h.apply(this,arguments)})},{key:"uploadChunks",value:(p=n(regeneratorRuntime.mark((function t(){var r,n,i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n in r=this.ref,this.uploader.emit("uploading",{ref:r}),t.prev=2,this.queue=new e({maxConcurrent:3}),this.chunks)this.chunks[n].isComplete||(this.chunks[n].loaded=0);return i=Object.keys(this.chunks).filter((function(t){return!o.chunks[t].isComplete})).map((function(t){return o.queue.schedule((function(){return o.uploadChunk(t)}))})),t.next=8,Promise.all(i);case 8:return t.next=10,this.complete();case 10:t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(2),"BottleneckError"!=t.t0.constructor.name){t.next=16;break}return t.abrupt("return");case 16:this.uploader.emit("error",{ref:r,error:t.t0});case 17:case"end":return t.stop()}}),t,this,[[2,12]])}))),function(){return p.apply(this,arguments)})},{key:"complete",value:(l=n(regeneratorRuntime.mark((function t(){var e,r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.ref,t.prev=1,t.next=4,this.uploader.client.query("query uploadCallback($key: String, $contentType: String!, $name: String!, $repositoryId: ID!, $actions: [String], $chunks: JSON, $parentContentId: ID) { \n                uploadCallback(key: $key, contentType: $contentType, name: $name, repositoryId: $repositoryId, actions: $actions, chunks: $chunks, parentContentId: $parentContentId) {\n                            id\n                            name\n                            data\n                        }\n                    }",{key:this.target.key,contentType:this.contentType,name:this.name,repositoryId:this.repositoryId,actions:this.actions,parentContentId:this.parentContentId,chunks:this.chunks});case 4:r=t.sent,n=r.data,i=n.uploadCallback,this.isComplete=!0,this.uploader.emit("fileComplete",{ref:e,content:i}),this.uploader.complete(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),this.uploader.emit("error",{ref:e,error:t.t0});case 15:case"end":return t.stop()}}),t,this,[[1,12]])}))),function(){return l.apply(this,arguments)})},{key:"addChunk",value:function(t,e){this.chunks[t]=e,this.chunks[t].isComplete=!1}},{key:"add",value:function(t,e){this.chunks[t]=e}},{key:"uploadChunk",value:(c=n(regeneratorRuntime.mark((function e(r){var n,i,o,s,a,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.CancelToken,i=n.source(),this.chunks[r].cancelSource=i,o=this.buffer.slice(this.chunks[r].startByte,this.chunks[r].endByte),s=this.ref,e.next=7,this.uploader.put(this.chunks[r].url,o,this.contentType,i.token,(function(t){var e=t.loaded,n=t.total,i=c.chunks[r].offset,o=c.chunks[r].maxOffset;c.uploader.emit("chunkProgress",{ref:s,loaded:e,total:n,maxOffset:o,offset:i}),c.chunks[r].loaded=e,c.progress()}));case 7:this.chunks[r].isComplete=!0,this.chunks[r].loaded=this.chunks[r].size,a=this.chunks[r].offset,u=this.chunks[r].maxOffset,this.uploader.emit("chunkProgress",{ref:s,loaded:this.chunks[r].size,total:this.chunks[r].size,maxOffset:u,offset:a}),this.progress();case 13:case"end":return e.stop()}}),e,this)}))),function(t){return c.apply(this,arguments)})},{key:"progress",value:function(){var t=this.size,e=0;for(var r in this.chunks)e+=this.chunks[r].loaded;this.uploader.emit("progress",{ref:this.ref,loaded:e,total:t})}},{key:"resume",value:(u=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.uploader.emit("fileResumed",{ref:this.ref,chunks:this.chunks}),t.next=3,this.upload();case 3:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"pause",value:(a=n(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e in this.chunks)"cancelSource"in this.chunks[e]&&this.chunks[e].cancelSource.cancel();if(!this.queue){t.next=4;break}return t.next=4,this.queue.stop();case 4:this.uploader.emit("filePaused",{ref:this.ref,chunks:this.chunks});case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"cancel",value:(o=n(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e in this.queue&&this.queue.stop(),this.chunks)"cancelSource"in(r=this.chunks[e])&&r.cancelSource.cancel();this.isComplete=!0,this.uploader.emit("fileCancelled",{ref:this.ref});case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}]),r}(),ge=function(){function t(){i(this,t)}return s(t,null,[{key:"calcReadingTime",value:function(t){var e=1,r=t.split(" ").length;return r>0&&(e=Math.ceil(r/200)),e}}]),t}(),be={Client:function(){function e(){var t=this;i(this,e),this.debug=!1,this.options={timeout:1e4,headers:{"Unalike-Agent":"unalike.js-".concat("0.17.4"),"Content-Type":"application/json; charset=utf-8"}},this.content=function(e){var r=new b(t);return e&&r.id(e),r},this.repository=function(e){var r=new k(t);return e&&r.id(e),r},this.model=function(e){var r=new T(t);return e&&r.id(e),r},this.interceptors={request:new C,fulfilled:new C,rejected:new C}}var r,o,a,u,c,l,p;return s(e,[{key:"setTimeout",value:function(t){this.options.timeout=t}},{key:"setOption",value:function(t,e){this.options[t]=e}},{key:"setApi",value:function(t){this.url=t}},{key:"setDebug",value:function(t){this.debug=t}},{key:"getUrl",value:function(){return this.url}},{key:"getVersion",value:function(){return"unalike.js-".concat("0.17.4")}},{key:"setToken",value:function(t){if(null!=t){if(this.token=t,t.indexOf("__")>-1&&t.indexOf("__")<40){var e=t.split("__")[0];this.url=e.indexOf("localhost")>-1?"http://".concat(e):"https://".concat(e)}this.options.headers["x-auth"]=t}}},{key:"setHeader",value:function(t,e){this.options.headers[t]=e}},{key:"buildUrl",value:function(t,e){var r="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r+="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(i),"&")}return r.length>0&&(r=r.substring(0,r.length-1),t="".concat(t,"?").concat(r)),t}},{key:"requiresToken",value:function(){if(void 0===this.token||null===this.token)throw new Error("Where's the key?")}},{key:"ping",value:(p=n(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("".concat(this.url,"/ping"),Object.assign(this.options,{method:"GET"}));case 2:return e=t.sent,this.debug,t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"get",value:(l=n(regeneratorRuntime.mark((function t(e,r,n){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.buildUrl("".concat(this.url).concat(e),r),t.next=3,this.request(i,Object.assign({},this.options,{method:"GET"},n));case 3:return o=t.sent,this.debug,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return l.apply(this,arguments)})},{key:"post",value:(c=n(regeneratorRuntime.mark((function t(e,r,n,i){var o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.buildUrl("".concat(this.url).concat(e),r),t.next=3,this.request(o,Object.assign({},this.options,{method:"POST",data:n},i));case 3:return s=t.sent,this.debug,t.abrupt("return",s);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return c.apply(this,arguments)})},{key:"put",value:(u=n(regeneratorRuntime.mark((function t(e,r,n,i){var o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.requiresToken(),o=this.buildUrl("".concat(this.url).concat(e),r),t.next=4,this.request(o,Object.assign({},this.options,{method:"PUT",data:n},i));case 4:return s=t.sent,this.debug,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return u.apply(this,arguments)})},{key:"delete",value:(a=n(regeneratorRuntime.mark((function t(e,r,n){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.requiresToken(),i=this.buildUrl("".concat(this.url).concat(e),r),t.next=4,this.request(i,Object.assign({},this.options,{method:"DELETE"},n));case 4:return o=t.sent,this.debug,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return a.apply(this,arguments)})},{key:"query",value:(o=n(regeneratorRuntime.mark((function t(e,r){var n,i,o,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:"/query",i=this.buildUrl("".concat(this.url).concat(n)),t.next=4,this.request(i,Object.assign({},this.options,{method:"POST",data:{query:e,variables:r}}));case 4:if(!((o=t.sent)&&o.data.errors&&o.data.errors.length>0)){t.next=7;break}throw new w(o);case 7:return o.data=o.data.data,this.debug,t.abrupt("return",o);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"request",value:(r=n(regeneratorRuntime.mark((function e(r,n){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=setTimeout((function(){throw new Error("Request timed out")}),n.timeout),e.prev=1,this.interceptors.request.forEach({url:r,options:n}),e.next=5,t(r,n);case 5:if(o=e.sent,clearTimeout(i),!((o={headers:o.headers,status:o.status,data:o.data}).status>=400)){e.next=12;break}throw new _({url:r,options:n,response:o});case 12:this.interceptors.fulfilled.forEach({url:r,options:n,response:o});case 13:return e.abrupt("return",o);case 16:if(e.prev=16,e.t0=e.catch(1),clearTimeout(i),!("response"in e.t0)){e.next=24;break}throw o={headers:e.t0.response.headers,status:e.t0.response.status,data:e.t0.response.data},s=new _(o),this.interceptors.rejected.forEach({url:r,options:n,error:s}),s;case 24:throw e.t0;case 25:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(t,e){return r.apply(this,arguments)})}]),e}(),Transformer:ye,Utils:ge,Uploader:ve};export default be;
